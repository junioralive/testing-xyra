<!DOCTYPE html>
<html lang="en">
<head>
    <title>Xyra - Home</title>
    <link rel="manifest" href="../manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="../icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../icons/favicon-32x32.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Xyra - A place to discover movies and TV shows. Watch anytime, anywhere.">
    <meta name="keywords" content="Xyra streaming, Xyra movies, Xyra TV shows, free movie streaming, free TV shows online, watch movies online, stream TV shows, online movie streaming, HD movies free, TV series streaming, Xyra free movies, Xyra stream movies, watch TV shows online, popular movies 2024, trending TV shows, best streaming platform, free movie site, watch free movies, Xyra media streaming, high-quality movie streaming, movie library online, binge-watch movies, latest movie releases, HD streaming movies, free series streaming, full episodes online">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Xyra - Discover, Watch, Enjoy Anytime, Anywhere">
    <meta property="og:description" content="Xyra - A place to discover movies and TV shows. Watch anytime, anywhere.">
    <meta property="og:image" content="https://raw.githubusercontent.com/junioralive/Xyra/refs/heads/main/assets/xyra.png">
    <meta property="og:url" content="https://xyrastream.live">
    <meta property="og:type" content="website">
    <meta name="author" content="JuniorAlive">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Reset and General Styles */
        html, body {
            margin: 0;
            padding: 0; 
            background-color: #121212;
            color: #E0E0E0;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden; /* Prevent horizontal scrolling */
            overflow-y: auto; /* Allow vertical scrolling only if necessary */
            scrollbar-width: none; /* Hide scrollbars in Firefox */
            -ms-overflow-style: none; /* Hide scrollbars in IE/Edge */
        }

        /* Minimal scrollbar styles for WebKit-based browsers */
        body, .search-results, .trending-slider {
            scrollbar-width: none; /* Hide scrollbar for Firefox */
        }

        /* Header Styles */
        .top-bar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(18, 18, 18, 0.5); /* Increased transparency */
            padding: 3px 10px; /* Reduced padding for smaller size */
            display: flex;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3); /* Softer shadow */
            backdrop-filter: blur(5px); /* Subtle blur effect */
            gap: 15px;
        }

        /* Ensure the entire logo and title are clickable */
        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none; /* Remove underline from the link */
            color: inherit; /* Keep the text color same */
            gap: 5px;
        }
        
        .title-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .title-icon {
            height: 40px !important; /* Desired height */
            width: 40px !important;  /* Desired width */
        }

        .title {
            color: #FFF;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        /* Icon and text visibility */
        .nav-link img {
            width: 24px;
            height: 24px;
        }

        /* Navigation text for PC view */
        .nav-link span {
            display: inline; /* Show text in PC view */
        }

        .nav-link {
            color: #BBB;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            transition: color 0.3s ease;
            display: flex; /* Ensure both text and icon are displayed */
            align-items: center;
        }
        
        .nav-link:hover {
            color: #FFF;
        }

        .nav-link.current{
            color: #FFD700; /* Gold color for active page */
            font-weight: 700;
        }

        .logo-link.current {
            color: #FFD700; /* Gold color for active page */
            font-weight: 700;
            text-decoration: underline ; /* Optional underline for emphasis */
        }    

        /* Search container styles */
        .search-container {
            position: relative;
            display: flex;
            align-items: center;
            margin-left: auto;
        }

        .search-icon {
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            transition: transform 0.2s ease;
        }

        #closeIcon {
            display: none; /* Initially hidden */
        }

        .search-icon:hover {
            transform: scale(1.2);
        }

        .search-icon img {
            object-fit: contain; /* Ensure the image scales proportionally */
            width: 30px; /* Adjust size for better appearance */
            height: 30px;
        }

        .search-input {
            width: 0;
            opacity: 0;
            height: 35px;
            font-size: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            transition: all 0.3s ease;
            outline: none;
            background: rgba(255, 255, 255, 0.1);
            color: #FFF;
            margin-left: 10px;
        }

        .search-input.show {
            width: 300px; /* Bigger search bar */
            opacity: 1;
        }

        .search-results {
            position: absolute;
            top: 40px;
            right: 0;
            width: 280px;
            background: rgba(18, 18, 18, 0.5); /* Match header transparency */
            backdrop-filter: blur(5px); /* Subtle blur effect */
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            padding: 5px 15px;
            display: none;
            z-index: 1000;
            margin-right: 75px; /* Add space on the right side */
        }

        /* Individual result items */
        .search-results .result-item {
            display: flex;
            align-items: center;
            gap: 8px; /* Reduced gap */
            padding: 8px 0; /* Smaller padding */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease, transform 0.3s ease;
        }

        .search-results .result-item:last-child {
            border-bottom: none;
        }

        /* Hover effect */
        .search-results .result-item:hover {
            background: rgba(255, 255, 255, 0.1); /* Transparent white hover effect */
            transform: scale(1.0); /* Slightly scale up */
            border-radius: 5px;
        }

        /* Image styles */
        .search-results img {
            width: 15%;
            height: 15%; /* Smaller image height */
            object-fit: cover;
            border-radius: 3px; /* Slightly smaller radius */
            margin-left: 15px; /* Add space on the right side */
        }

        .search-results .result-details {
            flex-grow: 1;
            color: #FFF;
        }

        .search-results .result-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .search-results .result-meta {
            font-size: 0.8rem;
            color: #BBB;
        }

        /* Bell icon styles */
        .bell-icon {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 30px; /* Ensure the container has a fixed size */
            height: 30px; /* Match width for a square container */
            cursor: pointer;
            transition: transform 0.2s ease, color 0.3s ease;
            margin-right: 50px; /* Adjust margin for better alignment */
            position: relative; /* For positioning the notification count */
            overflow: visible; /* Change from 'hidden' to 'visible' */
            border-radius: 50%; /* Optional: Make it circular */
        }


        .bell-icon img {
            width: 100%; /* Adjust the image to fit the container */
            height: 100%; /* Maintain aspect ratio within the container */
            object-fit: contain; /* Ensure the image scales proportionally */
            border-radius: 50%; /* Optional: Match container shape */
        }


        .bell-icon:hover {
            transform: scale(1.1); /* Slight zoom on hover */
            color: #FFD700; /* Add gold tint on hover */
        }

        /* Notification count styles */
        .notification-count {
            position: absolute;
            top: 0; /* Position the notification count at the top-right */
            right: 0;
            background: #FF0000;
            color: #FFF;
            font-size: 0.7rem; /* Adjust font size for smaller text */
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); /* Add a shadow for emphasis */
        }

        /* Notification Center */
        .notification-center {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            max-height: 60vh;
            background: rgba(18, 18, 18, 0.95); /* Slightly darker background */
            border-radius: 10px;
            overflow-y: auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none; /* Initially hidden */
            flex-direction: column;
            padding: 10px; /* Add padding for cleaner layout */
            animation: fadeIn 0.3s ease-in-out; /* Smooth fade-in effect */
            scrollbar-width: none; /* Hide scrollbar for Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }

        .notification-center::-webkit-scrollbar {
            display: none; /* Hide scrollbar for Chrome, Safari, Opera */
        }

        /* Notification Header */
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(18, 18, 18, 0.9);
            color: #FFD700; /* Gold for emphasis */
            font-size: 1rem;
            font-weight: bold;
        }

        /* Notification List */
        .notifications {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .notification-item {
            display: flex;
            gap: 10px;
            padding: 10px;
            align-items: center; /* Ensure vertical alignment */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .notification-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .notification-item img {
            width: 50px;
            height: 75px;
            border-radius: 5px;
            object-fit: cover;
            flex-shrink: 0; /* Prevent image from resizing */
        }

        .notification-item div {
            flex: 1; /* Allow details to grow */
            display: flex;
            flex-direction: column;
            gap: 5px; /* Add spacing between details */
        }

        .notification-item h4 {
            font-size: 1rem;
            margin: 0;
        }

        .notification-item p {
            font-size: 0.8rem;
            margin: 0;
            color: #bbb; /* Softer text color */
        }

        .dismiss-button {
            background: none;
            border: none;
            color: #FFF;
            font-size: 1.2rem;
            cursor: pointer;
            margin-left: auto;
            transition: color 0.3s;
        }

        .dismiss-button:hover {
            color: #FF0000; /* Red on hover */
        }

        .close-button-notification {
            background: none;
            border: none;
            color: #ff0000;
            font-size: 1.2rem;
            cursor: pointer;
        }

        /* Main Content */
        .banner {
            position: relative;
            width: 100%;
            height: 75vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: black;
            overflow: hidden; /* Prevent video from overflowing */
        }

        .banner img,
        .banner iframe {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
            transform: scale(1.5);
            pointer-events: none; /* Prevent interactions while not in hover state */
        }
        
        .banner iframe:hover {
            transform: scale(1.1); /* Zoom in the iframe */
            z-index: 3; /* Bring it to the front */
            pointer-events: auto; /* Enable interaction during hover */
        }        

        .banner img {
            display: block;
            filter: brightness(0.8);
        }

        .banner iframe {
            display: none;
        }

        .banner-details {
            position: absolute;
            bottom: 50px;
            left: 50px;
            color: #FFFFFF;
            z-index: 2;
            max-width: 50%;
        }

        .banner-title {
            display: flex;
            flex-direction: column;
            gap: 10px; /* Space between elements */
            color: #FFFFFF;
            max-width: 60%; /* Adjust width */
        }

        /* Title Styling */
        .banner-main-title {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1.2;
        }

        /* Rank Styling */
        .banner-rank {
            font-size: 1.2rem;
            font-weight: 700;
            color: #FFD700; /* Gold color */
            text-transform: uppercase;
        }

        /* Type Styling */
        .banner-type {
            font-size: 0.9rem;
            font-weight: 500;
            color: #BBB;
            text-transform: capitalize;
            margin-top: 5px;
        }

        /* Description Styling */
        .banner-description {
            font-size: 1rem;
            margin-top: 10px;
            line-height: 1.5;
            color: #DDD;
        }

        .type-year {
            position: relative;
            margin-top: 5px;
            font-size: 0.8rem;
            color: #FFF;
            text-align: center;
            pointer-events: none;
        }

        /* Trending Section */
        .trending-section {
            position: relative;
            padding: 20px;
        }

        .trending-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
            margin-left: 90px;
        }

        .trending-slider-container {
            position: relative;
            overflow: visible;
            padding: 0; /* Remove extra padding */
            margin-top: -50px; /* Adjust to lift the slider above the iframe */
            z-index: 2; /* Ensure it is above other elements */
        }

        /* Adjusted .trending-slider */
        .trending-slider {
            display: flex;
            gap: 10px;
            overflow-x: scroll; /* Changed from 'hidden' to 'auto' */
            scroll-behavior: smooth;
            position: relative;
            padding: 20px 0;
            padding-left: 50px; /* Added */
            padding-right: 50px; /* Added */
        }

        .trending-item {
            position: relative;
            flex: 0 0 auto;
            width: 150px;
            height: 225px; /* Added fixed height */
            background-color: #181818;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            z-index: 1;
            transform-origin: center left;
        }
        

        .trending-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .trending-item:hover {
            transform: scale(1.05); /* Slightly reduced scale for minimal shift */
            box-shadow: 0 8px 16px rgba(255, 255, 255, 0.2);
            z-index: 2; /* Ensure hovered item is above others */
        }      

        .type-year {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%; /* Stretch across the width of the card */
            background: rgba(0, 0, 0, 0.7); /* Semi-transparent background */
            color: #FFF;
            font-size: 0.7rem; /* Small font size */
            font-weight: 500;
            text-align: center; /* Center the text */
            padding: 2px 0; /* Minimal padding */
            z-index: 2; /* Ensure it's above the image */
            pointer-events: none; /* Avoid interaction */
            border-radius: 0 0 10px 10px; /* Match card's rounded corners at the bottom */
        }

        .rank-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255, 215, 0, 0.9); /* Gold background */
            color: #121212; /* Dark text */
            font-size: 0.5rem;
            font-weight: 700;
            padding: 5px 5px;
            border-radius: 5px;
            z-index: 3; /* Ensure it stays above other elements */
            pointer-events: none; /* Avoid interaction */
            text-transform: uppercase;
        }

        /* Continue Watching Section */
        .continue-watching-section {
            position: relative;
            padding: 10px;
        }

        .continue-watching-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
            margin-left: 80px;
        }

        .continue-watching-slider-container {
            position: relative;
            overflow: visible;
            padding: 10px;
        }

        .release-status {
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            color: #FFD700; /* Gold color */
            margin-top: 5px; /* Space between the card and the text */
        }
        
        /* Popular and Top Rated Sections */
        .popular-section, .top-rated-section {
            position: relative;
            padding: 10px;
        }

        .popular-title, .top-rated-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
            margin-left: 80px;
        }

        .popular-slider-container, .top-rated-slider-container {
            position: relative;
            overflow: visible;
            padding: 10px;
        }

        /* Arrow Buttons */
        .arrow-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            z-index: 5; /* Increased from 2 to 5 */
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
        }

        .arrow-button:hover {
            background-color: rgba(255, 255, 255, 0.8);
            color: black;
        }

        /* Optional: Adjust arrow positions if needed */
        .arrow-left {
            left: 10px; /* Adjusted */
        }

        .arrow-right {
            right: 10px; /* Adjusted */
        }

        /* Add to List Styles */
        .add-to-list {
            position: absolute;
            top: 10px; /* Switched from top */
            right: 10px; /* Switched from right */
            background: rgba(0, 0, 0, 0.7);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3;
            transition: transform 0.2s ease-in-out;
        }

        .add-to-list img {
            width: 24px;
            height: 24px;
            stroke: white; /* Outline color */
            transition: stroke 0.3s ease-in-out;
        }

        .add-to-list:hover {
            background: rgba(255, 255, 255, 0.8);
            color: black;
        }

        /* Tooltip Styles */
        .add-to-list:hover::after {
            content: "Add to list"; /* Tooltip text */
            position: absolute;
            bottom: -25px;
            left: 35%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            font-size: 0.5rem;
            padding: 5px 8px;
            border-radius: 5px;
            white-space: nowrap;
            z-index: 4;
            opacity: 1;
            transition: opacity 0.2s ease-in-out;
        }

        .add-to-list::after {
            opacity: 0; /* Initially hidden */
            transition: opacity 0.2s ease-in-out;
        }

        /* Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8); /* Slightly darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .popup-card {
            background: rgba(18, 18, 18, 0.8); /* Transparent card background */
            border: 1px solid rgba(255, 255, 255, 0.2); /* Subtle border */
            border-radius: 10px;
            padding: 20px;
            max-width: 400px;
            width: 90%;
            color: #E0E0E0; /* Light text color */
            text-align: center;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5); /* Subtle shadow */
            backdrop-filter: blur(10px); /* Add glassmorphism effect */
        }
        
        .popup-card h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #FFD700; /* Gold color for headings */
        }
        
        .popup-card p {
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 20px;
            color: #DDD; /* Softer text for paragraphs */
        }
        
        .popup-card a {
            color: #FFD700; /* Gold color for links */
            text-decoration: none;
        }
        
        .popup-card a:hover {
            text-decoration: underline;
        }
        
        .popup-card button {
            background: rgba(255, 215, 0, 0.9); /* Gold button */
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            color: #121212; /* Dark text for contrast */
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        
        .popup-card button:hover {
            background: #FFF; /* White background on hover */
            color: #000;
            transform: scale(1.05); /* Slight zoom effect */
        }

        /* Disabled button style */
        #adCloseBtn.disabled {
            background-color: #ccc; /* Grey background */
            color: #666; /* Light grey text */
            cursor: not-allowed; /* Show disabled cursor */
            border: 1px solid #999; /* Subtle border */
        }

        /* Enabled button style */
        #adCloseBtn.enabled {
            background-color: #FFD700; /* Gold background */
            color: #121212; /* Dark text */
            cursor: pointer; /* Pointer cursor */
            border: 1px solid #FFC300; /* Border matching the button */
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Add hover effect for enabled button */
        #adCloseBtn.enabled:hover {
            background-color: #FFF; /* Bright white on hover */
            color: #000; /* Dark text on hover */
        }
        
        /* Notification styles */
        .notification {
            position: fixed;
            display: flex; /* Center content */
            justify-content: center; /* Center text horizontally */
            align-items: center; /* Center text vertically */
            top: 50%; /* Position at the vertical center */
            left: 50%; /* Position at the horizontal center */
            transform: translate(-50%, -50%); /* Center the notification using transform */
            background: rgba(0, 0, 0, 0.8);
            color: #FFF;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .notification.visible {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1); /* Maintain centered position */
        }

        .notification.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Footer Styles */
        .footer {
            background-color: rgba(18, 18, 18, 0.5); /* Match the header transparency */
            color: #AAA; /* Soft gray text color */
            text-align: center; /* Center the content */
            padding: 8px 15px; /* Compact padding for a sleek look */
            font-size: 0.85em; /* Slightly smaller font size */
            backdrop-filter: blur(5px); /* Add blur effect to match the header */
            -webkit-backdrop-filter: blur(5px); /* Safari compatibility */
            box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
        }
        
        .footer a {
            color: #FFD700; /* Gold color for links */
            text-decoration: none; /* Remove underline */
            font-weight: 500; /* Medium emphasis */
            transition: color 0.3s ease; /* Smooth hover effect */
        }
        
        .footer a:hover {
            color: #FFF; /* Brighten the link color on hover */
            text-decoration: underline; /* Add underline on hover */
        }
        
        .footer small {
            display: block;
            margin-top: 5px; /* Adjust spacing from the main footer text */
            font-size: 0.75em; /* Smaller font size for the note */
            line-height: 1.3; /* Improve readability */
        }
        
        /* Style for disclaimer link */
        .footer .disclaimer-link {
            color: #FF5555; /* Red color for the disclaimer text */
            font-size: 1em; /* Match the small text size */
            font-weight: 400; /* Regular font weight */
        }
        
        .footer .disclaimer-link:hover {
            color: #FFF; /* Change to white on hover */
            text-decoration: underline; /* Add underline on hover */
        }

        /* Mobile Menu */
        /* Dropdown Menu */
        .dropdown-menu {
            position: absolute;
            top: 50px; /* Adjust based on your header height */
            width: 200px; /* Define the width of the dropdown */
            background-color: rgba(18, 18, 18, 0.9); /* Transparent dark background */
            border: 1px solid rgba(255, 255, 255, 0.2); /* Subtle border */
            border-radius: 10px; /* Rounded corners */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* Subtle shadow */
            opacity: 0; /* Initially hidden */
            transform: translateY(-10px); /* Slide up effect */
            pointer-events: none; /* Prevent interaction when hidden */
            transition: opacity 0.3s ease, transform 0.3s ease; /* Smooth animation */
            z-index: 1000; /* Ensure it's above other elements */
            overflow: hidden; /* Clip overflowing content */
        }

        .dropdown-menu.visible {
            opacity: 1; /* Make visible */
            transform: translateY(0); /* Reset position */
            pointer-events: auto; /* Allow interaction */
        }

        /* Menu Items */
        .dropdown-menu a {
            display: block;
            padding: 10px 15px;
            color: #E0E0E0;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.2s ease, color 0.2s ease;
        }

        .dropdown-menu a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #FFF;
        }

        /* Remove border from the last item */
        .dropdown-menu a:last-child {
            border-bottom: none;
        }


        /* Hamburger Menu Icon */
        .menu-icon {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            margin-right: 15px;
        }

        .menu-icon img {
            width: 30px;
            height: 30px;
            object-fit: contain; /* Ensure the image scales proportionally */
        }


        /* Fade-in Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none; /* Hide navigation links for mobile view */
            }

            .menu-icon {
                display: block; /* Show hamburger menu */
            }
            /* Adjust search container */
            .search-container {
                flex: 0 0 auto; /* Do not allow to grow or shrink */
                display: flex;
                align-items: center;
            }
        
            .search-icon {
                display: none; /* Hide the search icon on mobile */
            }
        
            .search-input {
                width: 150px; /* Fixed width for the search bar */
                opacity: 1; /* Always visible */
                height: 30px;
                font-size: 0.9rem;
                padding: 5px 10px;
                margin-right: 15px;
                transition: none; /* Remove transitions for instant display */
                display: block; /* Ensure it's displayed */
            }
        
            /* Ensure the search input is always visible */
            .search-input.show {
                width: 150px;
                opacity: 1;
            }

            .search-results {
                margin-top: 10px;
                margin-right: 40px; /* Reset margin */
                margin-left: 40px; /* Reset margin */
                text-align: center; /* Center align */
                display: none; /* Ensure it's a block element for centering */
            }

            .bell-icon {
                width: 30px;
                height: 30px;
                margin-right: 25px; /* Reduce margin */
            }

            .notification-count {
                width: 15px; /* Smaller count bubble */
                height: 15px;
                font-size: 0.7rem; /* Smaller font */
                top: -5px;
                right: 15px;
            }

            .notification-center {
                width: 90%;
                max-width: 300px;
                right: 10px;
                left: 10px;
                bottom: 30px;
            }
        
            .notifications li {
                gap: 8px;
            }
        
            .notifications li img {
                width: 40px;
                height: 60px;
            }
        
            .notification-center {
                bottom: max(env(safe-area-inset-bottom, 0px), 30px);
                left: 50%;
                transform: translateX(-50%);
                width: 95%;
            }

            .popular-title, .top-rated-title, .continue-watching-title  {
                margin-left: 20px;
            }

            /* Adjust banner for mobile */
            .banner {
                height: 65vh;
            }

            .banner-details {
                bottom: 20px;
                left: 20px;
                max-width: 90%;
            }

            .banner-main-title {
                font-size: 1.5rem;
                line-height: 1.2;
            }

            .banner-rank {
                font-size: 1rem;
            }

            .banner-description {
                font-size: 0.9rem;
                margin-top: 5px;
            }

            .banner iframe {
                transform: scale(3); /* Adjust zoom for portrait */
                width: 100%; /* Stretch width to fit screen */
                height: 100%; /* Stretch height to fill viewport */
                object-fit: cover; /* Ensure the video fills the space proportionally */
            }
            
            .footer {
                padding: 8px 10px; /* Compact padding for smaller screens */
                font-size: 0.75em; /* Smaller font size to save space */
            }

            .footer a {
                font-size: 0.85em; /* Slightly larger font size for links */
                display: inline-block; /* Make links stack vertically if needed */
                word-break: break-word; /* Prevent long links from overflowing */
            }

            .footer small {
                font-size: 0.7em; /* Smaller disclaimer text */
                margin-top: 6px; /* Adjust spacing from the main footer text */
            }

        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.2); /* Light gray border */
            border-top: 4px solid #FFD700; /* Gold top border */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto; /* Center horizontally */
            display: none; /* Initially hidden */
        }
        
        /* Spinner animation */
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

/* Wrapper for Slider Item and Title */
.slider-item-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 150px; /* Match the width of .trending-item */
    height: 265px; /* 225px for the card + 40px for the title */
    margin: 0 5px; /* Adjust spacing between items */
}


/* Card Title Styling */
.card-title {
    margin-top: 8px; /* Space between card and title */
    font-size: 0.9rem;
    font-weight: 500;
    color: #E0E0E0;
    text-align: center;
    width: 100%; /* Full width of the card */
    height: 40px; /* Fixed height for consistency */
    overflow: hidden; /* Hide overflow text */
    text-overflow: ellipsis; /* Add ellipsis for overflowing text */
    white-space: nowrap; /* Prevent text from wrapping */
}


        
    </style>  
</head>
<body>
    
    <!-- Header -->
        <div class="top-bar">
            <div class="menu-icon" id="menuButton">
                <img src="../icons/burger-menu.svg" alt="Menu" />
            </div>
            <div id="dropdownMenu" class="dropdown-menu">
                <a href="index.html">Home</a>
                <a href="discover.html">Discover</a>
                <a href="topic.html">Topics</a>
                <a href="mylist.html">My List</a>
            </div>
            <div class="title-container">
                <a href="../index.html" class="logo-link nav-link" id="homeLink">
                    <img src="../icons/icon-192x192.png" alt="Xyra Logo" class="title-icon">
                    <h1 class="title">yra</h1>
                </a>
            </div>
         
            <div class="nav-links">
                <a href="index.html" class="nav-link current" id="homeLink">
                    <img src="../icons/home.svg" alt="Home">
                    <span>Home</span>
                </a>
                <a href="discover.html" class="nav-link" id="discoverLink">
                    <img src="../icons/discover.svg" alt="Discover">
                    <span>Discover</span>
                </a>
                <a href="topic.html" class="nav-link" id="topicLink">
                    <img src="../icons/topic.svg" alt="Topics">
                    <span>Topics</span>
                </a>
                <a href="mylist.html" class="nav-link" id="mylistLink">
                    <img src="../icons/my-list.svg" alt="My List">
                    <span>My List</span>
                </a>
            </div>
             
            <div class="search-container">
                <button class="search-icon" id="searchButton">
                    <img id="searchIcon" src="../icons/search.svg" alt="Search Icon"/>
                    <img id="closeIcon" src="../icons/close.svg" alt="Close Icon" />
                </button>                
                <input type="text" class="search-input" placeholder="Search...">
                <div id="searchResults" class="search-results"></div>
                <div class="bell-icon" id="bellIcon">
                    <img src="../icons/bell-icon.svg" alt="Notification Bell Icon" />
                    <span id="notificationCount" class="notification-count" style="display: none;">0</span>
                </div>                
            </div>
        </div>

    <div id="notification" class="notification hidden"></div>
    
    <!-- Banner -->
    <div id="banner" class="banner">
        <img id="bannerImage" src="" alt="Trending Banner">
        <iframe id="bannerTrailer" frameborder="0" allow="autoplay; encrypted-media; fullscreen" playsinline></iframe>
        <div class="banner-details">
            <div id="bannerTitle" class="banner-title"></div>
            <div id="bannerDescription" class="banner-description"></div>
        </div>
    </div>


    <!-- Trending Section -->
    <div class="trending-section">
        <div id="trendingLoading" class="spinner"></div> <!-- Spinner -->
        <div class="trending-slider-container">
            <button class="arrow-button arrow-left" id="prevArrow">&#8249;</button>
            <div id="trending" class="trending-slider"></div>
            <button class="arrow-button arrow-right" id="nextArrow">&#8250;</button>
        </div>
    </div>    

    <!-- Continue Watching Section -->
    <div class="continue-watching-section">
        <h2 class="continue-watching-title">| Continue Watching</h2>
        <div class="continue-watching-slider-container">
            <button class="arrow-button arrow-left" id="prevContinueWatchingArrow">&#8249;</button>
            <div id="continueWatching" class="trending-slider"></div>
            <button class="arrow-button arrow-right" id="nextContinueWatchingArrow">&#8250;</button>
        </div>
    </div>


    <!-- Popular Movies and TV Shows -->
    <div class="popular-section">
        <h2 class="popular-title">| Popular</h2>
        <div class="popular-slider-container">
            <button class="arrow-button arrow-left" id="prevPopularArrow">&#8249;</button>
            <div id="popular" class="trending-slider"></div>
            <button class="arrow-button arrow-right" id="nextPopularArrow">&#8250;</button>
        </div>
    </div>

    <!-- Top Rated Movies and TV Shows -->
    <div class="top-rated-section">
        <h2 class="top-rated-title">| Top Rated</h2>
        <div class="top-rated-slider-container">
            <button class="arrow-button arrow-left" id="prevTopRatedArrow">&#8249;</button>
            <div id="topRated" class="trending-slider"></div>
            <button class="arrow-button arrow-right" id="nextTopRatedArrow">&#8250;</button>
        </div>
    </div>
        
    <div id="bookmarkPopup" class="popup-overlay" style="display: none;">
        <div class="popup-card">
            <h2>Bookmark Xyra Stream</h2>
            <p>
                For quick access, bookmark our official website <strong>xyrastream.live</strong>!
            </p>
            <button id="bookmarkBtn">Next</button>
        </div>
    </div>
    
    <div id="popupOverlay" class="popup-overlay" style="display: none;">
        <div id="popupCard" class="popup-card">
            <div class="popup-content">
                <h2>Welcome to Xyra Stream</h2>
                <p>
                    Xyra Stream is absolutely legal and contains only links to other sites on the Internet. 
                    We do not host or upload any video, films, or media files (avi, mov, flv, mpg, mpeg, divx, 
                    dvd rip, mp3, mp4, torrent, ipod, psp). Xyra is not responsible for the accuracy, compliance, 
                    copyright, legality, decency, or any other aspect of the content of other linked sites. 
                    <a href="about.html" target="_blank">Read more...</a>
                </p>
                <button id="popupNextBtn">Next</button>
            </div>
        </div>
    </div>

    <div id="supPopup" class="popup-overlay" style="display: none;">
        <div class="popup-card">
            <div class="popup-content">
                <h2>Support Xyra Stream</h2>
                <p>
                    This ad helps us fund Xyra Stream to keep it free and accessible. Ads are shown only once per day. Thank you for your support!
                </p>                
                <div>
                    <script type="text/javascript">
                        atOptions = {
                            'key' : 'ffeec1627761e95b8e3e498b3a92e84b',
                            'format' : 'iframe',
                            'height' : 250,
                            'width' : 300,
                            'params' : {}
                        };
                    </script>
                    <script type="text/javascript" src="//www.highperformanceformat.com/ffeec1627761e95b8e3e498b3a92e84b/invoke.js"></script>
                </div>
                <p id="adTimer" style="font-weight: bold; margin: 10px 0;"></p> <!-- Timer element -->
                <button id="adCloseBtn">Next</button>
            </div>
        </div>
    </div>

    <div id="discordPopup" class="popup-overlay" style="display: none;">
        <div class="popup-card">
            <div class="popup-content">
                <h2>Join Our Discord Community</h2>
                <p>Connect with like-minded individuals and get updates about Xyra Stream. Join now!</p>
                <button id="discordJoinBtn" onclick="window.open('https://discord.gg/cwDTVKyKJz', '_blank')">Join Discord</button>
                <button id="popupCloseBtn">Done</button>
            </div>
        </div>
    </div>

    <div id="notificationCenter" class="notification-center">
        <div class="notification-header">
            <h4>Notifications</h4>
            <button id="closeNotifications" class="close-button-notification">âœ•</button>
        </div>
        <ul id="notifications" class="notifications"></ul>
    </div>
    <script>
        // ======================= Utility Functions =======================
    
        /**
         * Debounces a function by the specified delay.
         * @param {Function} func - The function to debounce.
         * @param {number} delay - The debounce delay in milliseconds.
         * @returns {Function} - The debounced function.
         */
        function debounce(func, delay) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), delay);
            };
        }
    
        /**
         * Displays a temporary notification to the user.
         * @param {string} message - The message to display.
         */
        function showNotification(message) {
            const notification = document.getElementById('notification');
            if (!notification) return; // Ensure the element exists
    
            notification.textContent = message;
            notification.classList.add('visible');
            notification.classList.remove('hidden');
            setTimeout(() => {
                notification.classList.remove('visible');
                notification.classList.add('hidden');
            }, 3000); // Hide after 3 seconds
        }
    
        /**
         * Retrieves an icon's HTML based on the action.
         * @param {string} action - The action ('add' or 'check').
         * @returns {string} - The HTML string for the icon.
         */
        function getIcon(action) {
            const icons = {
                add: `<img src="../icons/add-list.svg" alt="Add to List Icon" />`,
                check: `<img src="../icons/check-circle.svg" alt="Added to List Icon" />`
            };
            return icons[action] || '';
        }
    
        // ======================= Local Storage Management =======================
    
        /**
         * Retrieves an item from localStorage and parses it as JSON.
         * @param {string} key - The key to retrieve.
         * @param {any} defaultValue - The default value if the key doesn't exist.
         * @returns {any} - The parsed JSON data or the default value.
         */
        function getLocalStorageItem(key, defaultValue = []) {
            const item = localStorage.getItem(key);
            try {
                return item ? JSON.parse(item) : defaultValue;
            } catch (error) {
                console.error(`Error parsing localStorage key "${key}":`, error);
                return defaultValue;
            }
        }
    
        /**
         * Saves an item to localStorage as a JSON string.
         * @param {string} key - The key to save.
         * @param {any} value - The value to save.
         */
        function setLocalStorageItem(key, value) {
            localStorage.setItem(key, JSON.stringify(value));
        }
    
        // ======================= Centralized Anime API Function =======================
    
        /**
         * Fetches data from the Anime API.
         * @param {string} endpoint - The API endpoint (e.g., '/api/v2/hianime/home').
         * @returns {Promise<Object|null>} - The fetched JSON data or null if an error occurs.
         */
/**
 * Fetches data from the Anime API with a timeout.
 * @param {string} endpoint - The API endpoint (e.g., '/api/v2/hianime/home').
 * @param {number} timeout - The timeout duration in milliseconds.
 * @returns {Promise<Object|null>} - The fetched JSON data or null if an error occurs or timeout is reached.
 */
 async function fetchFromAnimeAPI(endpoint, timeout = 99999) {
    const BASE_API_URL = 'https://aniwatch-api-vmcl.onrender.com';
    const url = `${BASE_API_URL}${endpoint}`;
    
    const controller = new AbortController();
    const signal = controller.signal;

    // Set up the timeout
    const timeoutId = setTimeout(() => {
        controller.abort();
    }, timeout);

    try {
        const response = await fetch(url, { signal });
        clearTimeout(timeoutId); // Clear the timeout since fetch completed

        if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
        const data = await response.json();
        if (!data.success) throw new Error('API response unsuccessful');
        return data.data;
    } catch (error) {
        if (error.name === 'AbortError') {
            console.error(`Request to "${endpoint}" timed out after ${timeout} ms.`);
            showNotification('The request timed out. Please try again later.');
        } else {
            console.error(`Error fetching from Anime API at "${endpoint}":`, error);
            showNotification('Failed to load data. Please check your connection and try again.');
        }
        return null;
    }
}

    
        // ======================= DOM Manipulation Functions =======================
    
        /**
         * Creates a slider item element for anime data.
         * @param {Object} anime - The anime data object.
         * @returns {HTMLElement} - The slider item element.
         */
        function createAnimeSliderItem(anime) {
            const sliderItemWrapper = document.createElement('div');
            sliderItemWrapper.classList.add('slider-item-wrapper'); // New wrapper
    
            const sliderItem = document.createElement('div');
            sliderItem.classList.add('trending-item'); // Reusing existing styles
    
            // Image
            const img = document.createElement('img');
            img.src = anime.poster || 'https://via.placeholder.com/150x225?text=No+Image';
            img.alt = anime.name || 'No Title';
    
            // Type-Episodes Container (e.g., Type and Episodes)
            const typeEpisodesContainer = document.createElement('div');
            typeEpisodesContainer.classList.add('type-year');
            typeEpisodesContainer.textContent = `${anime.type || 'N/A'} Â· Sub: ${anime.episodes?.sub || 0} Dub: ${anime.episodes?.dub || 0}`;
    
            // Add to My List Button
            const addToListButton = document.createElement('button');
            addToListButton.classList.add('add-to-list');
            const myList = getLocalStorageItem('myList');
            const isAdded = myList.some(
                (savedItem) => savedItem.id === anime.id && savedItem.type === anime.type
            );
            addToListButton.innerHTML = isAdded ? getIcon('check') : getIcon('add');
            addToListButton.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent triggering click on parent
                toggleMyList(anime, addToListButton, anime.type);
            });
    
            // Assemble Slider Item
            sliderItem.appendChild(img);
            sliderItem.appendChild(typeEpisodesContainer);
            sliderItem.appendChild(addToListButton);
            sliderItem.addEventListener('click', () => {
                window.location.href = `details.html?id=${anime.id}&type=${anime.type}`;
            });
    
            // Title Element
            const titleElement = document.createElement('div');
            titleElement.classList.add('card-title');
            titleElement.textContent = anime.name || 'No Title';
    
            // Append to Wrapper
            sliderItemWrapper.appendChild(sliderItem);
            sliderItemWrapper.appendChild(titleElement); // Add title below the card
    
            return sliderItemWrapper;
        }
    
        /**
         * Displays anime items in a specified slider section.
         * @param {Array} animes - The array of anime items.
         * @param {string} sectionId - The ID of the slider container.
         */
        function displaySliderItemsFromAnime(animes, sectionId) {
            const sliderContainer = document.getElementById(sectionId);
            if (!sliderContainer) {
                console.error(`Slider container with ID "${sectionId}" not found.`);
                return;
            }
            sliderContainer.innerHTML = ''; // Clear existing content
    
            const fragment = document.createDocumentFragment();
    
            animes.forEach(anime => {
                const sliderItem = createAnimeSliderItem(anime);
                fragment.appendChild(sliderItem);
            });
    
            sliderContainer.appendChild(fragment);
        }
    
        /**
         * Displays Top 10 Animes in a specified slider section.
         * @param {Array} top10Animes - The array of top 10 anime items.
         * @param {string} sectionId - The ID of the slider container.
         */
        function displayTop10Animes(top10Animes, sectionId) {
            const sliderContainer = document.getElementById(sectionId);
            if (!sliderContainer) {
                console.error(`Slider container with ID "${sectionId}" not found.`);
                return;
            }
            sliderContainer.innerHTML = ''; // Clear existing content
    
            const fragment = document.createDocumentFragment();
    
            top10Animes.forEach(anime => {
                const sliderItem = createAnimeSliderItem(anime);
    
                // Optionally, add rank badge
                if (anime.rank) {
                    const rankBadge = document.createElement('div');
                    rankBadge.classList.add('rank-badge');
                    rankBadge.textContent = `#${anime.rank}`;
                    sliderItem.querySelector('.trending-item').appendChild(rankBadge);
                }
    
                fragment.appendChild(sliderItem);
            });
    
            sliderContainer.appendChild(fragment);
        }
    
        /**
         * Loads and displays all home data from the Anime API.
         */
        async function loadHomeData() {
            const homeData = await fetchFromAnimeAPI('/api/v2/hianime/home');
            if (!homeData) {
                showNotification('Failed to load anime data.');
                return;
            }
    
            // Populate Genres (if applicable)
            // populateGenres(homeData.genres);
    
            // Populate Banner with Spotlight Animes
            if (homeData.spotlightAnimes && homeData.spotlightAnimes.length > 0) {
                const spotlightAnime = homeData.spotlightAnimes[Math.floor(Math.random() * homeData.spotlightAnimes.length)];
                updateBannerFromAnime(spotlightAnime);
            }
    
            // Populate Trending Section
            if (homeData.trendingAnimes && homeData.trendingAnimes.length > 0) {
                displaySliderItemsFromAnime(homeData.trendingAnimes, 'trending');
            }
    
            // Populate Popular Section
            if (homeData.mostPopularAnimes && homeData.mostPopularAnimes.length > 0) {
                displaySliderItemsFromAnime(homeData.mostPopularAnimes, 'popular');
            }
    
            // Populate Top Rated Section
            if (homeData.top10Animes && homeData.top10Animes.today && homeData.top10Animes.today.length > 0) {
                displayTop10Animes(homeData.top10Animes.today, 'topRated'); // Adjust as needed
            }
    
            // Populate Other Sections Similarly...
            // Example:
            // if (homeData.latestEpisodeAnimes && homeData.latestEpisodeAnimes.length > 0) { ... }
        }
    
        /**
         * Updates the banner with a spotlight anime.
         * @param {Object} anime - The spotlight anime data.
         */
        function updateBannerFromAnime(anime) {
            const bannerImage = document.getElementById('bannerImage');
            const bannerTrailer = document.getElementById('bannerTrailer'); // If you have trailers
            const bannerTitle = document.getElementById('bannerTitle');
            const bannerDescription = document.getElementById('bannerDescription');
    
            if (!bannerImage || !bannerTitle || !bannerDescription) {
                console.error('One or more banner elements are missing.');
                return;
            }
    
            // Update banner image
            bannerImage.src = anime.poster || 'https://via.placeholder.com/150x225?text=No+Image';
            bannerImage.style.display = 'block';
            bannerTrailer.style.display = 'none'; // Hide trailer if not used
    
            // Update banner details
            bannerTitle.innerHTML = `
                <div class="banner-rank">#${anime.rank || 'N/A'}</div>
                <div class="banner-main-title">${anime.name}</div>
                <div class="banner-type">${anime.type || 'N/A'}</div>
            `;
            bannerDescription.textContent = anime.description || 'No description available.';
        }
    
        // ======================= Slider Navigation Setup =======================
    
        /**
         * Sets up arrow navigation for a specific slider section.
         * @param {string} sliderId - The ID of the slider container.
         * @param {string} prevArrowId - The ID of the previous arrow button.
         * @param {string} nextArrowId - The ID of the next arrow button.
         */
        function setupArrowNavigation(sliderId, prevArrowId, nextArrowId) {
            const slider = document.getElementById(sliderId);
            const prevArrow = document.getElementById(prevArrowId);
            const nextArrow = document.getElementById(nextArrowId);
    
            if (!slider || !prevArrow || !nextArrow) {
                console.error(`One or more arrow elements for slider "${sliderId}" are missing.`);
                return;
            }
    
            prevArrow.addEventListener('click', () => {
                slider.scrollBy({ left: -300, behavior: 'smooth' });
            });
    
            nextArrow.addEventListener('click', () => {
                slider.scrollBy({ left: 300, behavior: 'smooth' });
            });
        }
    
        /**
         * Sets up arrow navigation for all slider sections.
         */
        function setupArrows() {
            // Setup for trending slider
            setupArrowNavigation('trending', 'prevArrow', 'nextArrow');
    
            // Setup for popular slider
            setupArrowNavigation('popular', 'prevPopularArrow', 'nextPopularArrow');
    
            // Setup for top-rated slider
            setupArrowNavigation('topRated', 'prevTopRatedArrow', 'nextTopRatedArrow');
    
            // Setup for continueWatching slider
            setupArrowNavigation('continueWatching', 'prevContinueWatchingArrow', 'nextContinueWatchingArrow');
        }
    
        // ======================= My List Management =======================
    
        /**
         * Toggles an item in the user's "My List".
         * @param {Object} anime - The anime data object.
         * @param {HTMLElement} button - The button element to update.
         * @param {string} type - The type of media ('movie' or 'tv').
         */
        function toggleMyList(anime, button, type) {
            const myList = getLocalStorageItem('myList');
            const itemIndex = myList.findIndex(existingItem => existingItem.id === anime.id && existingItem.type === type);
    
            if (itemIndex === -1) {
                // Add item to the list
                myList.push({
                    id: anime.id,
                    name: anime.name || 'No Title',
                    poster: anime.poster,
                    type: type
                });
                setLocalStorageItem('myList', myList);
                button.innerHTML = getIcon('check');
                showNotification(`${anime.name} has been added to your list.`);
            } else {
                // Remove item from the list
                myList.splice(itemIndex, 1);
                setLocalStorageItem('myList', myList);
                button.innerHTML = getIcon('add');
                showNotification(`${anime.name} has been removed from your list.`);
            }
        }
    
        // ======================= Search Functionality =======================
    
        /**
         * Searches for anime items based on the query.
         * @param {string} query - The search query.
         * @returns {Promise<Array>} - The array of search results.
         */
        async function searchAnimes(query) {
            // Assuming the Anime API has a search endpoint like '/api/v2/hianime/search?query=...'
            const data = await fetchFromAnimeAPI(`/api/v2/hianime/search?query=${encodeURIComponent(query)}`);
            return data?.results || [];
        }
    
        /**
         * Displays search results in the UI.
         * @param {Array} results - The array of search results.
         */
        function displayAnimeSearchResults(results) {
            const searchResults = document.getElementById('searchResults');
            if (!searchResults) {
                console.error('Search results container not found.');
                return;
            }
    
            searchResults.innerHTML = '';
            const displayedResults = results.slice(0, MAX_SEARCH_RESULTS);
    
            if (displayedResults.length > 0) {
                searchResults.style.display = 'block';
                displayedResults.forEach(anime => {
                    const resultItem = document.createElement('div');
                    resultItem.classList.add('result-item');
    
                    const img = document.createElement('img');
                    img.src = anime.poster || 'https://via.placeholder.com/50x75?text=No+Image';
                    img.alt = anime.name || 'No Title';
    
                    const details = document.createElement('div');
                    details.classList.add('result-details');
    
                    const title = document.createElement('div');
                    title.classList.add('result-title');
                    title.textContent = anime.name || 'No Title';
    
                    const meta = document.createElement('div');
                    meta.classList.add('result-meta');
                    meta.textContent = `${anime.type || 'N/A'} Â· Episodes: Sub ${anime.episodes?.sub || 0} Dub ${anime.episodes?.dub || 0}`;
    
                    details.appendChild(title);
                    details.appendChild(meta);
                    resultItem.appendChild(img);
                    resultItem.appendChild(details);
    
                    resultItem.addEventListener('click', () => {
                        window.location.href = `details.html?id=${anime.id}&type=${anime.type}`;
                    });
    
                    searchResults.appendChild(resultItem);
                });
            } else {
                searchResults.innerHTML = '<div class="result-item">No results found.</div>';
                searchResults.style.display = 'block';
            }
        }
    
        /**
         * Sets up the search functionality for anime.
         */
        function setupSearch() {
            const searchButton = document.getElementById('searchButton');
            const searchInput = document.querySelector('.search-input');
            const searchResults = document.getElementById('searchResults');
            const searchIcon = document.getElementById('searchIcon');
            const closeIcon = document.getElementById('closeIcon');
    
            if (!searchButton || !searchInput || !searchResults || !searchIcon || !closeIcon) {
                console.error('One or more search elements are missing.');
                return;
            }
    
            // Toggle search input visibility
            searchButton.addEventListener('click', () => {
                if (!searchInput.classList.contains('show')) {
                    searchInput.classList.add('show');
                    searchInput.focus();
                    searchIcon.style.display = 'none';
                    closeIcon.style.display = 'inline';
                } else {
                    searchInput.value = ''; // Clear input
                    searchInput.classList.remove('show');
                    searchResults.style.display = 'none'; // Hide results
                    searchIcon.style.display = 'inline';
                    closeIcon.style.display = 'none';
                }
            });
    
            // Add the "Enter" key event to redirect to search.html
            searchInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    const query = searchInput.value.trim();
                    if (query) {
                        window.location.href = `search.html?query=${encodeURIComponent(query)}`;
                    }
                }
            });
    
            /**
             * Debounced search handler to optimize API calls
             */
            const debouncedSearch = debounce(async (event) => {
                const query = event.target.value.trim();
                if (query.length > 2) {
                    const results = await searchAnimes(query);
                    displayAnimeSearchResults(results);
                } else {
                    searchResults.style.display = 'none';
                }
            }, 300); // 300ms debounce delay
    
            searchInput.addEventListener('input', debouncedSearch);
        }
    
        // ======================= Notifications =======================
    
        /**
         * Sets up the notification center, including rendering and interaction logic.
         */
        function setupNotifications() {
            const bellIcon = document.getElementById('bellIcon');
            const notificationCount = document.getElementById('notificationCount');
            const notificationCenter = document.getElementById('notificationCenter');
            const closeNotifications = document.getElementById('closeNotifications');
            const notificationList = document.querySelector('.notifications');
    
            if (!bellIcon || !notificationCount || !notificationCenter || !closeNotifications || !notificationList) {
                console.error('One or more notification elements are missing.');
                return;
            }
    
            let notifications = getLocalStorageItem('notifications');
    
            // Filter out unreleased animes
            const currentDate = new Date();
            notifications = notifications.filter(notification => {
                const releaseDate = new Date(notification.releaseDate);
                return releaseDate <= currentDate; // Keep only released items
            });
    
            // Sort notifications by release date (latest first)
            notifications.sort((a, b) => new Date(b.releaseDate) - new Date(a.releaseDate));
    
            /**
             * Updates the notification count badge.
             */
            function updateNotificationCount() {
                const unreadCount = notifications.length;
                if (unreadCount > 0) {
                    notificationCount.textContent = unreadCount;
                    notificationCount.style.display = 'flex';
                } else {
                    notificationCount.style.display = 'none';
                }
            }
    
            /**
             * Renders the notifications in the UI.
             */
            function renderNotifications() {
                notificationList.innerHTML = ''; // Clear previous notifications
    
                if (notifications.length === 0) {
                    const emptyMessage = document.createElement('li');
                    emptyMessage.textContent = 'No notifications available.';
                    emptyMessage.style.textAlign = 'center';
                    notificationList.appendChild(emptyMessage);
                    return;
                }
    
                const fragment = document.createDocumentFragment();
    
                notifications.forEach((notification, index) => {
                    const listItem = document.createElement('li');
                    listItem.classList.add('notification-item');
                    listItem.style.cursor = 'pointer';
    
                    const img = document.createElement('img');
                    img.src = notification.poster || 'https://via.placeholder.com/50x75?text=No+Image';
                    img.alt = notification.name || 'No Title';
    
                    const details = document.createElement('div');
                    details.innerHTML = `
                        <h4>${notification.name}</h4>
                        <p>${notification.type || 'N/A'}</p>
                        <p>${getReleaseText(notification.releaseDate, notification.type)}</p>
                    `;
    
                    const dismissButton = document.createElement('button');
                    dismissButton.textContent = 'âœ•';
                    dismissButton.classList.add('dismiss-button');
                    dismissButton.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent parent click
                        dismissNotification(index);
                    });
    
                    listItem.appendChild(img);
                    listItem.appendChild(details);
                    listItem.appendChild(dismissButton);
    
                    // Add click event for navigation and deletion
                    listItem.addEventListener('click', () => {
                        navigateToDetails(notification, index);
                    });
    
                    fragment.appendChild(listItem);
                });
    
                notificationList.appendChild(fragment);
            }
    
            /**
             * Generates release text based on the number of days ago.
             * @param {string} releaseDate - The release date of the anime.
             * @param {string} type - The type of media ('movie' or 'tv').
             * @returns {string} - The formatted release text.
             */
            function getReleaseText(releaseDate, type) {
                const release = new Date(releaseDate);
                const currentDate = new Date();
                const daysAgo = Math.floor((currentDate - release) / (1000 * 60 * 60 * 24));
    
                if (daysAgo === 0) {
                    return type === 'tv' ? 'Aired Today' : 'Released Today';
                } else if (daysAgo === 1) {
                    return type === 'tv' ? 'Aired 1 day ago' : 'Released 1 day ago';
                } else {
                    return type === 'tv'
                        ? `Aired ${daysAgo} days ago`
                        : `Released ${daysAgo} days ago`;
                }
            }
    
            /**
             * Dismisses a notification by its index.
             * @param {number} index - The index of the notification to dismiss.
             */
            function dismissNotification(index) {
                notifications.splice(index, 1); // Remove from array
                setLocalStorageItem('notifications', notifications); // Update localStorage
                renderNotifications(); // Re-render the list
                updateNotificationCount(); // Update count
            }
    
            /**
             * Navigates to the details page of a notification and dismisses it.
             * @param {Object} notification - The notification data.
             * @param {number} index - The index of the notification.
             */
            function navigateToDetails(notification, index) {
                const route = `details.html?id=${notification.id}&type=${notification.type}`;
                dismissNotification(index); // Remove the notification
                window.location.href = route; // Navigate to the route
            }
    
            /**
             * Toggles the visibility of the notification center.
             */
            function toggleNotificationCenter() {
                const isVisible = notificationCenter.style.display === 'flex';
                notificationCenter.style.display = isVisible ? 'none' : 'flex';
                if (!isVisible) renderNotifications(); // Render only when opening
            }
    
            // Close notification center when clicking outside
            document.addEventListener('click', (event) => {
                if (!notificationCenter.contains(event.target) && !bellIcon.contains(event.target)) {
                    notificationCenter.style.display = 'none';
                }
            });
    
            // Event listeners
            bellIcon.addEventListener('click', toggleNotificationCenter);
            closeNotifications.addEventListener('click', () => {
                notificationCenter.style.display = 'none';
            });
    
            // Initialize notification count
            updateNotificationCount();
        }
    
        // ======================= Popups and Modals =======================
    
        /**
         * Sets up and manages the display logic for various popups.
         */
        function setupPopups() {
            const bookmarkPopup = document.getElementById('bookmarkPopup');
            const popupOverlay = document.getElementById('popupOverlay'); // Disclaimer popup
            const supPopup = document.getElementById('supPopup'); // Ad popup
            const discordPopup = document.getElementById('discordPopup'); // Discord popup
            const popupNextBtn = document.getElementById('popupNextBtn');
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const adCloseBtn = document.getElementById('adCloseBtn');
            const popupCloseBtn = document.getElementById('popupCloseBtn');
    
            if (!bookmarkPopup || !popupOverlay || !supPopup || !discordPopup ||
                !popupNextBtn || !bookmarkBtn || !adCloseBtn || !popupCloseBtn) {
                console.error('One or more popup elements are missing.');
                return;
            }
    
            const today = new Date().toISOString().split('T')[0]; // Format: YYYY-MM-DD
            const lastPopupDate = localStorage.getItem('lastPopupDate');
    
            if (lastPopupDate !== today) {
                // Show the bookmark pop-up first
                bookmarkPopup.style.display = 'flex';
            }
    
            // Show the disclaimer pop-up after the bookmark pop-up
            bookmarkBtn.addEventListener('click', () => {
                bookmarkPopup.style.display = 'none';
                popupOverlay.style.display = 'flex'; // Show the disclaimer popup
            });
    
            // Variable to track if the ad button has been clicked
            let adButtonClicked = false;
    
            // Show the ad pop-up after the disclaimer pop-up
            popupNextBtn.addEventListener('click', () => {
                popupOverlay.style.display = 'none';
                supPopup.style.display = 'flex';
    
                // Update the ad button to prompt for visiting the site
                adCloseBtn.textContent = 'Continue';
                adCloseBtn.disabled = false;
                adCloseBtn.classList.remove('disabled'); // Remove any disabled styling
                adCloseBtn.classList.add('enabled'); // Add enabled styling
    
                // Reset the click tracker
                adButtonClicked = false;
            });
    
            // Handle adCloseBtn clicks
            adCloseBtn.addEventListener('click', () => {
                if (!adButtonClicked) {
                    // First click: Open the specified link in a new tab
                    window.open('https://propertyswordmuttering.com/tm87gtn94e?key=c19f44e28e45c5c6dbfc4c70551054aa', '_blank');
                    adButtonClicked = true; // Update the tracker
                    adCloseBtn.textContent = 'Next'; // Change button text to 'Next'
                } else {
                    // Second click: Proceed to the Discord popup
                    supPopup.style.display = 'none';
                    discordPopup.style.display = 'flex';
                }
            });
    
            // Close the Discord pop-up and mark all pop-ups as shown for today
            popupCloseBtn.addEventListener('click', () => {
                discordPopup.style.display = 'none';
                localStorage.setItem('lastPopupDate', today); // Mark the pop-ups as shown today
            });
        }
    
        // ======================= Hamburger Menu =======================
    
        function setupHamburgerMenu() {
            const menuButton = document.getElementById('menuButton');
            const dropdownMenu = document.getElementById('dropdownMenu');
    
            if (!menuButton || !dropdownMenu) {
                console.error('One or more hamburger menu elements are missing.');
                return;
            }
    
            // Toggle dropdown visibility
            menuButton.addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent click from propagating
                dropdownMenu.classList.toggle('visible');
            });
    
            // Close dropdown when clicking outside
            window.addEventListener('click', () => {
                if (dropdownMenu.classList.contains('visible')) {
                    dropdownMenu.classList.remove('visible');
                }
            });
    
            // Prevent dropdown from closing when clicking inside
            dropdownMenu.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        }
    
        // ======================= Main Initialization =======================
    
        /**
         * Initializes all functionalities once the DOM is fully loaded.
         */
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize all sections with Anime API data
            loadHomeData();
    
            // Setup slider arrow navigations
            setupArrows();
    
            // Setup search functionality
            setupSearch();
    
            // Setup popups and modals
            setupPopups();
    
            // Setup notification center
            setupNotifications();
    
            // Setup hamburger menu
            setupHamburgerMenu();
        });
    </script>
    
    <!-- Footer -->
    <footer class="footer">
        <!-- <script type="text/javascript">
            atOptions = {
                'key' : '3f6aa652ee8cb72386ae1ff0cf7cf77c',
                'format' : 'iframe',
                'height' : 50,
                'width' : 320,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//propertyswordmuttering.com/3f6aa652ee8cb72386ae1ff0cf7cf77c/invoke.js"></script> -->
        <p>
            Made with â™¥ by <a href="https://github.com/junioralive">JuniorAlive, Xyra Stream Â© 2024</a>
        </p>
        <small>
            <a href="about.html" class="disclaimer-link">Xyra does not host any files; it pulls streams from third-party services.</a>
        </small>
    </footer>
</body>
</html>
